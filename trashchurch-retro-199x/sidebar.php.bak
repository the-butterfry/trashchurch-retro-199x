<aside class="tr-sidebar">
  <?php
  // Member Services menu (safe-guarded; renders only if function exists and a menu is assigned)
  if ( function_exists( 'tr199x_render_member_nav' ) ) {
    tr199x_render_member_nav();
  }
  ?>

  <?php if ( is_active_sidebar('tr199x-sidebar') ) : ?>
    <?php dynamic_sidebar('tr199x-sidebar'); ?>
  <?php else: ?>
    <div class="widget">
      <h3 class="widget-title"><?php esc_html_e('Search','trashchurch-retro-199x'); ?></h3>
      <?php get_search_form(); ?>
    </div>
    <div class="widget">
      <h3 class="widget-title"><?php esc_html_e('Recent Posts','trashchurch-retro-199x'); ?></h3>
      <ul>
        <?php
          $recent = wp_get_recent_posts(array('numberposts'=>5));
          foreach ($recent as $r) {
            echo '<li><a href="'.get_permalink($r['ID']).'">'.esc_html($r['post_title']).'</a></li>';
          }
        ?>
      </ul>
    </div>
    <div class="widget">
      <h3 class="widget-title"><?php esc_html_e('Archives','trashchurch-retro-199x'); ?></h3>
      <ul><?php wp_get_archives(array('type'=>'monthly','limit'=>6)); ?></ul>
    </div>
    <div class="widget">
      <h3 class="widget-title"><?php esc_html_e('Meta','trashchurch-retro-199x'); ?></h3>
      <ul>
        <?php wp_register(); ?>
        <li><?php wp_loginout(); ?></li>
        <li><a href="<?php echo esc_url(get_feed_link('rss2')); ?>">RSS</a></li>
      </ul>
    </div>
    <div class="widget">
      <h3 class="widget-title"><?php esc_html_e('Guestbook Tip','trashchurch-retro-199x'); ?></h3>
      <p><?php esc_html_e('Create a page named "Guestbook" and enable comments for authentic sign-ins.','trashchurch-retro-199x'); ?></p>
    </div>
  <?php endif; ?>
</aside>
