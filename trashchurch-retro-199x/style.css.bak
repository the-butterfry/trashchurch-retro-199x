/*
Theme Name: TrashChurch Retro 199X
Theme URI: https://example.com/trashchurch-retro-199x
Author: the-butterfry
Author URI: https://github.com/the-butterfry
Description: Maximalist late 1990s geocities/angelfire style with marquee, comet cursor, tiled GIFs, MIDI (optional), retro hit counter (global + per-post), digit GIF sprites. Fully responsive + ac[...]
Version: 0.2.3
License: GPL-2.0-or-later
Text Domain: trashchurch-retro-199x
Tags: blog, retro, custom-background, custom-logo, responsive-layout, accessibility-ready, nostalgia
*/

/* -----------------------------------------------------------
   CSS VARIABLES (Base Palette)
----------------------------------------------------------- */
:root {
  --tr-bg: #000010;
  --tr-bg-alt: #080818;
  --tr-panel: #101028;
  --tr-panel-alt: #1a1840;
  --tr-border: #ff00ff;
  --tr-border-alt: #00ffff;
  --tr-accent: #fffb00;
  --tr-accent-2: #00ffcc;
  --tr-link: #66ddff;
  --tr-link-hover: #fff;
  --tr-font: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
  --tr-mono: "Courier New",ui-monospace,monospace;
  --tr-header-font: var(--tr-font);
  --tr-radius: 10px;
  --tr-max: 1280px;
  --tr-focus: #ffcc33;
  --tr-gradient: linear-gradient(135deg,#28104a,#002a4a 45%,#004a4a 60%,#28104a);
  --tr-noise-alpha: 0.25;
}

/* Color Schemes */
body.scheme-green {
  --tr-border:#00ff66;
  --tr-border-alt:#ffff00;
  --tr-accent:#66ff99;
  --tr-accent-2:#00ffaa;
  --tr-link:#aaffdd;
}
body.scheme-amber {
  --tr-border:#ffae00;
  --tr-border-alt:#ffec8a;
  --tr-accent:#ffd65f;
  --tr-accent-2:#ff9f2a;
  --tr-link:#ffe6b0;
}
body.scheme-magenta {
  --tr-border:#ff41f7;
  --tr-border-alt:#ffa2ff;
  --tr-accent:#ffd6ff;
  --tr-accent-2:#ff7bff;
  --tr-link:#ffcfff;
}

html,body {
  margin:0;
  padding:0;
}

body {
  background: var(--tr-bg) url('assets/img/tile.gif') repeat fixed;
  color: #f0f3ff;
  font: 16px/1.5 var(--tr-font);
  -webkit-font-smoothing: antialiased;
  overflow-x:hidden;
}

body.tr-no-tile {
  background: var(--tr-bg) !important;
}

a {
  color: var(--tr-link);
  text-decoration: underline;
}
a:hover, a:focus {
  color: var(--tr-link-hover);
  background: rgba(255,255,0,0.15);
  text-decoration: underline;
}
:focus-visible {
  outline: 3px dashed var(--tr-focus);
  outline-offset: 3px;
}

body.pixelated-bg {
  image-rendering: pixelated;
}

.tr-sr {
  position:absolute;
  width:1px;height:1px;
  padding:0;margin:-1px;
  overflow:hidden;
  clip:rect(0 0 0 0);
  border:0;
}

.tr-wrapper {
  max-width: var(--tr-max);
  margin: 0 auto;
  padding: 0 20px 100px;
  position: relative;
}

/* HEADER */
.tr-header {
  margin-top: 16px;
  background: var(--tr-gradient);
  border: 4px ridge var(--tr-border);
  border-radius: var(--tr-radius);
  padding: 26px 24px 20px;
  position: relative;
  box-shadow: 0 0 25px var(--tr-border-alt), inset 0 0 25px #000;
  overflow: hidden;
}
.tr-header:before {
  content:"";
  position:absolute;
  inset:0;
  background:
    repeating-linear-gradient(45deg,rgba(255,255,255,0.07) 0 14px,transparent 14px 28px);
  mix-blend-mode: overlay;
  opacity:0.3;
  pointer-events:none;
}
.tr-title {
  margin:0;
  font-size: clamp(2.4rem,6vw,3.8rem);
  letter-spacing:2px;
  font-weight:900;
  text-shadow: 0 0 10px var(--tr-border-alt), 0 0 25px var(--tr-border);
  background: linear-gradient(90deg,var(--tr-accent-2),var(--tr-accent),var(--tr-border));
  -webkit-background-clip: text;
  color:transparent;
}
.tr-title a { text-decoration:none; color:inherit; }
.tr-tagline {
  margin:6px 0 0;
  font-size: 14px;
  font-family: var(--tr-mono);
  color: var(--tr-accent-2);
  letter-spacing:1px;
}

/* NAV */
.tr-nav-toggle {
  display:none;
  background: #140430;
  color: var(--tr-accent);
  font-weight:700;
  border:3px outset var(--tr-border);
  padding:10px 16px;
  margin-top: 18px;
  font-size:14px;
  cursor:pointer;
  border-radius:12px;
  text-shadow:0 0 4px var(--tr-border-alt);
  box-shadow:0 0 10px var(--tr-border-alt);
}
.tr-nav-toggle:hover { background:#1c0a44; }

.tr-nav {
  margin-top: 20px;
  background: #060020;
  border: 4px groove var(--tr-border);
  border-radius: var(--tr-radius);
  padding: 10px 14px 14px;
  box-shadow: inset 0 0 25px #000, 0 0 15px var(--tr-border-alt);
  position:relative;
}
.tr-nav ul {
  list-style:none;
  margin:0;
  padding:0;
  display:flex;
  flex-wrap:wrap;
  gap:10px;
}
.tr-nav li a {
  display:inline-block;
  padding:8px 18px;
  background: linear-gradient(180deg,#1f0040,#080020);
  border:2px solid var(--tr-border-alt);
  border-radius: 999px;
  font-size:14px;
  font-weight:700;
  font-family: var(--tr-mono);
  color: var(--tr-accent-2);
  text-decoration:none;
  letter-spacing:1px;
  box-shadow: 0 0 6px var(--tr-border-alt), inset 0 0 10px #000;
  transition: transform .25s, background .25s;
}
.tr-nav li a:hover,
.tr-nav li.current-menu-item > a,
.tr-nav li.current_page_item > a {
  background: linear-gradient(180deg,var(--tr-accent-2),#090040);
  color:#000;
  transform: translateY(-3px);
}
@media(max-width: 980px){
  .tr-nav-toggle { display:block; }
  .tr-nav.tr-collapsed { display:none; }
  .tr-nav ul { flex-direction:column; }
}

/* MARQUEE */
.tr-marquee {
  margin-top: 16px;
  border: 4px double var(--tr-border-alt);
  background: repeating-linear-gradient(90deg,#060020 0 30px,#100040 30px 60px);
  border-radius: var(--tr-radius);
  padding: 4px 2px;
  font-family: var(--tr-mono);
  font-size: clamp(.75rem,2.6vw,1rem);
  color: var(--tr-accent-2);
  box-shadow: inset 0 0 15px #000, 0 0 10px var(--tr-border);
}
body.no-marquee .tr-marquee { display:none; }

/* LAYOUT */
.tr-layout {
  display:grid;
  grid-template-columns: 1fr 290px;
  gap: clamp(24px,3vw,46px);
  margin-top: 38px;
}
@media(max-width: 1080px){ .tr-layout { gap:30px; } }
@media(max-width: 880px){ .tr-layout { grid-template-columns:1fr; } }

/* PANEL / POSTS */
.tr-panel {
  position:relative;
  background: #0b0020;
  border:4px ridge var(--tr-border);
  border-radius: 18px;
  padding: 30px 30px 40px;
  box-shadow: 0 0 25px #000, inset 0 0 25px #000, 0 0 22px var(--tr-border-alt);
}
.tr-post + .tr-post { margin-top:50px; }
.tr-post h2,
.tr-post h1 {
  margin-top:0;
  font-size: clamp(1.8rem,4.5vw,2.8rem);
  letter-spacing:1px;
  color: var(--tr-accent);
  text-shadow: 0 0 8px var(--tr-accent-2), 0 0 18px var(--tr-border-alt);
  font-weight:800;
}
.tr-post h2 a { color: inherit; text-decoration:none; }
.tr-meta {
  font-size: 12px;
  font-family: var(--tr-mono);
  color: var(--tr-link);
  margin: 0 0 15px;
  border-bottom:1px dashed var(--tr-border-alt);
  padding-bottom:6px;
  word-break:break-word;
}
.tr-excerpt, .tr-content-body { font-size: 1rem; line-height:1.6; }
.tr-read-more {
  display:inline-block;
  margin-top:16px;
  padding:8px 18px;
  border:2px solid var(--tr-accent-2);
  background: linear-gradient(120deg,var(--tr-accent-2),var(--tr-border));
  color:#000;
  text-decoration:none;
  font-weight:700;
  font-family: var(--tr-mono);
  border-radius: 14px;
  box-shadow: 0 0 14px var(--tr-accent-2), inset 0 0 8px #000;
  transition: transform .25s;
}
.tr-read-more:hover { transform: translateY(-4px) scale(1.05); }

.tr-tags {
  margin-top:15px;
  font-family: var(--tr-mono);
  font-size:12px;
  color: var(--tr-accent-2);
}
.tr-tags a {
  display:inline-block;
  background:#150040;
  border:2px solid var(--tr-border-alt);
  padding:4px 10px;
  margin: 4px 6px 0 0;
  border-radius: 999px;
  text-decoration:none;
  font-size:11px;
  letter-spacing:.5px;
  color: var(--tr-accent);
  box-shadow: 0 0 6px #000;
}
.tr-tags a:hover { background: var(--tr-accent-2); color:#000; }

/* Under Construction Ribbon */
.tr-ribbon {
  position:absolute;
  top:-14px;
  left:-14px;
  background: repeating-linear-gradient(45deg,#ff0000 0 14px,#ffff00 14px 28px);
  color:#000;
  font-weight:700;
  font-size:11px;
  font-family: var(--tr-mono);
  padding: 8px 12px;
  border:2px solid #222;
  box-shadow:0 0 14px #000;
  transform: rotate(-8deg);
  letter-spacing:1px;
}

/* ASCII box */
.tr-ascii-box {
  border:2px solid var(--tr-accent-2);
  padding:10px;
  margin:30px 0;
  font-family: var(--tr-mono);
  background:#050016;
  box-shadow: inset 0 0 15px #000;
}

/* Pagination */
.tr-pagination {
  text-align:center;
  margin: 60px 0 10px;
  font-family: var(--tr-mono);
}
.tr-pagination .page-numbers {
  display:inline-block;
  padding:8px 14px;
  margin:4px 4px;
  background:#0a0030;
  border:2px solid var(--tr-border-alt);
  color: var(--tr-accent-2);
  text-decoration:none;
  border-radius:10px;
  font-weight:700;
  box-shadow:0 0 8px var(--tr-border-alt);
}
.tr-pagination .current,
.tr-pagination .page-numbers:hover {
  background: var(--tr-accent-2);
  color:#000;
}

/* Sidebar */
.tr-sidebar .widget {
  background:#0a0026;
  border:4px groove var(--tr-border);
  border-radius: 18px;
  padding: 24px 24px 30px;
  margin:0 0 38px;
  box-shadow: 0 0 18px #000, inset 0 0 18px #000;
  position:relative;
}
.tr-sidebar .widget-title {
  margin:0 0 12px;
  font-size:20px;
  font-family: var(--tr-mono);
  color: var(--tr-accent);
  text-shadow:0 0 8px var(--tr-accent-2);
  letter-spacing:1px;
  position:relative;
}
.tr-sidebar .widget-title:after {
  content:"";
  display:block;
  height:4px;
  margin-top:6px;
  background: linear-gradient(90deg,var(--tr-border),var(--tr-border-alt),var(--tr-border));
  box-shadow:0 0 10px var(--tr-border-alt);
}

/* Footer */
/* keep a generic badges container (some themes place badges outside footer) */
.tr-badges {
  display:flex;
  flex-wrap:wrap;
  gap:6px;
  justify-content:center;
  margin: 10px 0 18px;
}

/* Footer: safe grid layout (integrated)
   Purpose:
   - Copyright remains left
   - Badges (GIFs) sit right on the first row
   - "Site Hits" appears on a second row, right-aligned
   Replaces earlier .tr-footer definitions to avoid conflicts.
*/
.tr-footer {
  background: var(--tr-gradient) !important;
  border: 4px ridge var(--tr-border);
  border-radius: var(--tr-radius);
  box-shadow: 0 0 16px #000 inset;
  padding: 18px 24px;
  margin-top: clamp(20px, 4vw, 40px);
  color: var(--tr-accent-2);
  font-family: var(--tr-mono);

  /* layout */
  display: grid;
  grid-template-columns: 1fr auto;
  grid-template-rows: auto auto;
  grid-template-areas:
    "copyright badges"
    ".        hits";
  gap: 8px 12px;
  align-items: center;
}

/* left cell: copyright */
.tr-footer p {
  grid-area: copyright;
  margin: 0;
  text-align: left;
  font-size: 0.95rem;
  color: inherit;
  font-family: inherit;
}

/* badges (GIFs) on the first row, right aligned */
.tr-footer .tr-badges {
  grid-area: badges;
  display: flex;
  gap: 8px;
  justify-self: end;
  align-items: center;
}

/* Site Hits forced onto its own row and right-aligned */
.tr-footer .tr-hit-counter,
.tr-footer .tr-post-hit-counter,
.tr-footer #global-hit-count {
  grid-area: hits;
  display: flex;
  gap: 8px;
  justify-self: end;
  align-items: center;
  margin-top: 4px;
  color: inherit;
  font-family: inherit;
}

/* keep badge visuals consistent */
.tr-footer .tr-badges img {
  height: 31px;
  image-rendering: pixelated;
  border: 2px solid var(--tr-border-alt);
  background: #0;
  box-shadow: 0 0 6px var(--tr-border-alt);
}

/* footer hit label styling (keeps visual consistent) */
.tr-hit-label {
  margin: 0;
  padding: 4px 8px;
  background: #140040;
  border: 2px solid var(--tr-border-alt);
  border-radius: 8px;
  font-weight: 700;
  color: var(--tr-accent);
  box-shadow: 0 0 8px var(--tr-border-alt), inset 0 0 8px #000;
}

/* Responsive: stack + center on narrow screens */
@media (max-width: 880px) {
  .tr-footer {
    grid-template-columns: 1fr;
    grid-template-areas:
      "copyright"
      "badges"
      "hits";
    text-align: center;
  }
  .tr-footer .tr-badges { justify-self: center; }
  .tr-footer .tr-hit-counter,
  .tr-footer #global-hit-count { justify-self: center; }
}

/* Guestbook */
.tr-guestbook {
  margin:40px 0;
  padding: 20px 24px;
  background:#090030;
  border:3px dashed var(--tr-accent-2);
  border-radius:16px;
  font-family: var(--tr-mono);
  color: var(--tr-accent);
  box-shadow:0 0 16px #000 inset;
}

/* Comments */
#comments { margin-top: 60px; }
.tr-comment {
  background:#130040;
  border:2px solid var(--tr-border-alt);
  border-radius: 14px;
  padding: 16px 18px 14px;
  margin: 20px 0;
  box-shadow:0 0 10px #000 inset;
}
.tr-comment-meta {
  font-size:11px;
  font-family: var(--tr-mono);
  color: var(--tr-accent-2);
  border-bottom:1px dotted var(--tr-border);
  margin-bottom:6px;
  padding-bottom:4px;
}
.comment-content p { margin-top:0; }
.comment-respond {
  background:#120038;
  border:3px groove var(--tr-border-alt);
  padding:24px 26px 30px;
  border-radius:18px;
  margin-top:50px;
  box-shadow:0 0 20px #000, inset 0 0 20px #000;
}
.comment-respond label {
  display:block;
  font-size:12px;
  font-family: var(--tr-mono);
  color: var(--tr-accent-2);
  margin:12px 0 4px;
  letter-spacing:.5px;
}
.comment-respond input[type=text],
.comment-respond input[type=email],
.comment-respond input[type=url],
.comment-respond textarea {
  width:100%;
  background:#050020;
  border:2px solid var(--tr-border-alt);
  color: var(--tr-accent);
  padding:10px 12px;
  border-radius:12px;
  font: inherit;
  box-shadow: inset 0 0 10px #000;
}
.comment-respond input:focus,
.comment-respond textarea:focus {
  outline:2px solid var(--tr-accent);
  outline-offset:2px;
}
.comment-respond input[type=submit] {
  margin-top:16px;
  background: linear-gradient(120deg,var(--tr-accent-2),var(--tr-border));
  color:#000;
  font-weight:800;
  padding:10px 20px;
  border:2px solid var(--tr-border-alt);
  border-radius: 14px;
  cursor:pointer;
  font-size:14px;
  box-shadow: 0 0 12px var(--tr-accent-2);
}
.comment-respond input[type=submit]:hover { filter:brightness(1.15); }

/* Search Form */
.tr-search-form {
  display:flex;
  gap:8px;
  margin-top:6px;
}
.tr-search-form input[type=search] {
  flex:1;
  background:#050028;
  border:2px solid var(--tr-border-alt);
  padding:8px 10px;
  border-radius: 12px;
  color: var(--tr-accent);
}
.tr-search-form button {
  background: linear-gradient(180deg,var(--tr-accent-2),var(--tr-accent));
  color:#000;
  border:2px solid var(--tr-border);
  font-weight:700;
  padding:8px 16px;
  border-radius:12px;
  cursor:pointer;
  box-shadow:0 0 10px var(--tr-accent);
}
.tr-search-form button:hover { filter:brightness(1.15); }

/* Code */
code, pre {
  font-family: var(--tr-mono);
  background:#000020;
  color:#9dfbff;
}
pre {
  padding:16px 18px;
  border:2px solid var(--tr-border-alt);
  border-radius:14px;
  overflow:auto;
  box-shadow: inset 0 0 15px #000;
}

/* Comet cursor image */
.tr-comet {
  position:fixed;
  top:0;left:0;
  width:34px;
  height:34px;
  pointer-events:none;
  z-index:9999;
  will-change: transform;
  image-rendering: pixelated;
}

/* Blink */
.blink { animation: trBlink 1s steps(2,start) infinite; }
@keyframes trBlink { to { visibility:hidden; } }

/* Reduced Motion */
@media (prefers-reduced-motion: reduce){
  .tr-nav li a,
  .tr-read-more { transition:none; }
}

/* Mobile adjustments */
@media(max-width:600px){
  .tr-panel { padding:24px 22px 34px; }
  .tr-sidebar .widget { padding:20px 20px 26px; }
}

/* Marquee disable on reduced motion */
body.prefers-reduced-motion .tr-marquee marquee { animation: none !important; }

/* Fancy HR */
.tr-hr {
  border:none;
  height:6px;
  margin:50px auto;
  max-width:400px;
  background:
    linear-gradient(90deg,var(--tr-border),var(--tr-border-alt),var(--tr-border));
  box-shadow:0 0 15px var(--tr-border-alt),0 0 25px var(--tr-border);
  border-radius:6px;
}

/* Retro table styling */
table.retro-table {
  width:100%;
  border:4px ridge var(--tr-border-alt);
  background:#080020;
  border-collapse:separate;
  border-spacing:4px;
  box-shadow:0 0 16px #000;
}
table.retro-table th,
table.retro-table td {
  background:#140040;
  border:2px groove var(--tr-border);
  padding:8px 10px;
  font-family: var(--tr-mono);
  color: var(--tr-accent-2);
  text-align:left;
}

/* Floating gif corner (optional) */
.tr-corner-gif {
  position:fixed;
  bottom:16px;
  right:16px;
  width:96px;
  height:auto;
  z-index:900;
  animation: floaty 3.5s ease-in-out infinite;
  pointer-events:none;
}
@keyframes floaty {
  0%,100% { transform: translateY(0); }
  50% { transform: translateY(-12px); }
}

/* === HIT COUNTER STYLES (Global & Post) === */
.tr-hit-counter,
.tr-post-hit-counter {
  font-family: var(--tr-mono);
  font-size: 13px;
  margin: 14px 0;
  color: var(--tr-accent-2);
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
}
.tr-hit-digits {
  display:flex;
  align-items:flex-end;
  gap:2px;
}
.tr-hit-digits .tr-digit {
  height:26px;
  width:auto;
  image-rendering:pixelated;
  filter: drop-shadow(0 0 4px var(--tr-accent-2));
}
.tr-hit-digits .tr-digit-text {
  padding:2px 4px;
  background:#000020;
  border:1px solid var(--tr-border);
  color: var(--tr-accent-2);
  font-weight:700;
  border-radius:4px;
}

/* Async target number (unstyled fallback) */
#global-hit-count {
  font-family: var(--tr-mono);
  font-size:14px;
  color: var(--tr-accent-2);
  margin-top:10px;
}

/* === Header UI cleanup: center site title/tagline, prefer system sans for them only === */
.tr-title,
.tr-title a {
  font-family: var(--tr-header-font) !important;
}
.tr-tagline {
  font-family: var(--tr-tagline-font, var(--tr-header-font)) !important;
}

.tr-title {
  text-align: center;
  font-weight: 800;
  letter-spacing: 0.3px;
  line-height: 1.1;
  margin: 0.2rem 0 0.25rem;
}

.tr-title a {
  text-decoration: none;
  color: inherit;
}

.tr-tagline {
  text-align: center;
  font-weight: 400;
  opacity: 0.95;
  margin-bottom: 0.5rem;
}
/* Replace the old template-scoped selector with this so the calendar template is excluded */
body:not(.page-template-page-teamup-calendar) .tr-teamup.tr-pipe-frame {
  padding-left: 22px;
  border-left: 4px solid var(--tr-border);
}

@media (max-width: 980px) {
  .tr-header .tr-nav.tr-collapsed,
  .tr-header #tr-primary-nav.tr-collapsed,
  .tr-header #site-navigation.tr-collapsed {
    display: none;
  }
}

/* End of file */
/* === Additional CSS migration: header/title wrap, fonts, hamburger (appended) === */

/* Neutralize any @font-face named "Comic Sans MS" by mapping it to a safe local font */
@font-face {
  font-family: "Comic Sans MS";
  src: local("Arial");
  font-style: normal;
  font-weight: 400;
  font-display: swap;
}

/* Defensive site-wide stack (loaded last). Then immediately restore known mono/header uses. */
*,
*::before,
*::after {
  font-family: var(--tr-font, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif) !important;
}

/* Restore areas that must stay monospace or custom */
code, pre, .tr-mono,
.tr-nav li a, .tr-sidebar .widget-title {
  font-family: var(--tr-mono) !important;
}

/* Respect the header font variable if present (from header-fonts module) */
.tr-title, .tr-title a {
  font-family: var(--tr-header-font, var(--tr-font)) !important;
}
.tr-tagline {
  font-family: var(--tr-tagline-font, var(--tr-header-font, var(--tr-font))) !important;
}

/* Ensure header overlay sits behind text so tagline is visible */
.tr-header { position: relative; }
.tr-header::before { z-index: 0; }
.tr-title, .tr-title a, .tr-tagline { position: relative; z-index: 1; }

/* Title wrapper: center and allow icons on both sides */
.tr-title-wrap {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: clamp(12px, 3vw, 32px);
  position: relative;
  padding: 6px 10px;
}

/* Keep existing visual treatment on the title (gradient clip etc.) */
.tr-title-wrap .tr-title {
  margin: 0;
  display: inline-block;
}

/* Images flanking the title (inline, not absolutely positioned) */
.tr-title-img {
  display: block;
  width: clamp(48px, 8vw, 120px);
  height: auto;
  max-height: 18vh;
  object-fit: contain;
  image-rendering: pixelated; /* retro pixel look if assets are pixel art */
  pointer-events: none;
  user-select: none;
  transform: translateY(0);
  transition: transform .18s ease;
  box-shadow: 0 0 10px rgba(0,0,0,0.55);
  border-radius: 12px;
  border: 2px solid rgba(255,255,255,0.04);
  background: rgba(0,0,0,0.25);
}

/* small hover "bounce" for desktop */
@media (hover: hover) and (pointer: fine) {
  .tr-title-img:hover { transform: translateY(-6px) scale(1.02); }
}

/* Optional: slightly tuck images inwards visually */
.tr-title-left  { margin-right: -8px; }
.tr-title-right { margin-left: -8px; }

/* Keep layout tidy on narrow screens: hide images under 720px */
@media (max-width: 720px) {
  .tr-title-img { display: none; }
  .tr-title-wrap { gap: 8px; padding: 4px; }
  .tr-title { font-size: clamp(1.6rem, 6vw, 2.6rem); }
}

/* ---------- Mobile hamburger helper (non-destructive) ---------- */
/* Add <span class="tr-hamburger" aria-hidden="true"></span> inside .tr-nav-toggle for these styles */
.tr-nav-toggle {
  position: relative; /* enable z-index */
  z-index: 9999;      /* keep it above decorative overlays */
  padding: 8px 12px;  /* slight padding tweak for small screens */
}

/* Draw a 3-bar hamburger if markup includes a .tr-hamburger child */
.tr-nav-toggle .tr-hamburger {
  display: inline-block;
  width: 26px;
  height: 2px;
  background: currentColor;
  position: relative;
  vertical-align: middle;
  border-radius: 2px;
}
.tr-nav-toggle .tr-hamburger::before,
.tr-nav-toggle .tr-hamburger::after {
  content: "";
  position: absolute;
  left: 0;
  width: 100%;
  height: 2px;
  background: currentColor;
  border-radius: 2px;
}
.tr-nav-toggle .tr-hamburger::before { top: -8px; }
.tr-nav-toggle .tr-hamburger::after  { top: 8px; }

@media (max-width: 980px) {
  .tr-nav-toggle { display: block; color: var(--tr-accent); }
}
@media (min-width: 981px) {
  .tr-nav-toggle .tr-hamburger { display: none; }
}

/* Optional open-state cross (if aria-expanded toggled elsewhere) */
.tr-nav-toggle[aria-expanded="true"] .tr-hamburger { background: transparent; }
.tr-nav-toggle[aria-expanded="true"] .tr-hamburger::before { transform: translateY(8px) rotate(45deg); }
.tr-nav-toggle[aria-expanded="true"] .tr-hamburger::after  { transform: translateY(-8px) rotate(-45deg); }

/* End Additional CSS migration */
/* Title/Tagline vertical stack inside the flanking image row */
.tr-title-stack {
  display: flex;
  flex-direction: column;
  align-items: center;
}

/* Strong ordering so overlay cannot cover title/tagline */
.tr-header::before { z-index: 0 !important; }
.tr-title, .tr-title a, .tr-tagline { position: relative; z-index: 2 !important; }

/* Fix: ensure the gradient text effect applies to the anchor that holds the text and stacks above */
.tr-title a {
  display: inline-block;
  background: inherit;
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent !important;
  position: relative;
  z-index: 3 !important;
}
